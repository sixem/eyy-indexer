"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}
/**
 * @license
 * 
 * <eyy-indexer-main> [https://github.com/sixem/eyy-indexer]
 * 
 * Licensed under GPL-3.0
 * @author   emy [admin@eyy.co]
 * @version  1.1.5
 */
!function(){var f={store:{preview:{},defaults:{},selection:{},selected:null,gallery:null,refresh:!1},debounce:function(t){var n;return function(e){n&&clearTimeout(n),n=setTimeout(t,100,e)}},checkNested:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0;o<n.length;o++){if(!e||!e.hasOwnProperty(n[o]))return!1;e=e[n[o]]}return!0},getReadableSize:function(e){var t=0<arguments.length&&void 0!==e?e:0;if(0===t)return"0.00 B";var n=_toConsumableArray(config.format.sizes),r=-1;for(n.shift();r++,1024<(t/=1024););return Math.max(t,.1).toFixed(1)+n[r]},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},fallbackCopyTextToClipboard:function(e){var t=document.createElement("textarea");t.value=e,t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy");config.debug&&console.log("fallback","copying text command was "+(n?"successful":"unsuccessful"))}catch(e){config.debug&&console.error("fallback","unable to copy",e)}document.body.removeChild(t)},copyTextToClipboard:function(e){navigator.clipboard?navigator.clipboard.writeText(e).then(function(){config.debug&&console.log("async","copying to clipboard was successful.")},function(e){config.debug&&console.error("async","could not copy text: ",e)}):f.fallbackCopyTextToClipboard(e)},getCellValue:function(e,t){var n=$(e).children("td").eq(t).data("raw");return void 0!==n?n:$(e).children("td").eq(t).text()},comparer:function(o){return function(e,t){var n=f.getCellValue(e,o),r=f.getCellValue(t,o);return $.isNumeric(n)&&$.isNumeric(r)?n-r:n.localeCompare(r)}},client:{get:function(){var t=["gallery","sort"],n={gallery:{reverse_options:config.gallery.reverse_options,list_alignment:config.gallery.list_alignment,autoplay:!0}};try{r=JSON.parse(Cookies.get("ei-client")),t.forEach(function(e){r.hasOwnProperty(e)||(r[e]=n.hasOwnProperty(e)?n[e]:{})}),Object.keys(n).forEach(function(t){Object.keys(n[t]).forEach(function(e){r[t].hasOwnProperty(e)||(r[t][e]=n[t][e])})})}catch(e){var r={};t.forEach(function(e){return r[e]={}}),f.client.set(Object.assign(r,n))}return r},set:function(e,t){var n=1<arguments.length&&void 0!==t?t:{},n=Object.assign({sameSite:"lax",expires:365},n);Cookies.set("ei-client",JSON.stringify(e),n)}},settings:{available:function(){return!!(config.hasOwnProperty("themes")&&0<config.themes.pool.length||!0===config.gallery.enabled)},create:{option:function(e,t,n,r){var o=2<arguments.length&&void 0!==n?n:{},i=3<arguments.length&&void 0!==r?r:null;o.hasOwnProperty("class")&&(o.class="option "+o.class);var a=Object.assign({class:"option"},o),l={class:"option-text",text:t};return i&&(l.title=i),e.wrap($("<div/>")).parent().wrap($("<div/>",a)).parent().prepend($("<div/>",l))},section:function(e,t){var n=1<arguments.length&&void 0!==t?t:null;return $("<div/>",{class:"section","data-key":e}).append($("<div/>",{class:"header",text:n||f.capitalize(e)}))},select:function(e,t,n){var r=2<arguments.length&&void 0!==n?n:null,o=$("<select/>",1<arguments.length&&void 0!==t?t:{});return o.append(e.map(function(e,t){e.text=f.capitalize(e.text);var n=$("<option/>",e);return null!==r&&!0===r(n,t,o)&&(n[0].selected=!0,o[0].selectedIndex=t),n})),o},check:function(e,t){var n=0<arguments.length&&void 0!==e?e:{},r=1<arguments.length&&void 0!==t?t:null,o=null!==r&&r();o&&(n.checked="");var i=$("<input/>",Object.assign(n,{type:"checkbox"}));return i[0].checked=o,i}},close:function(){$(".focus-overlay, .settings-container").remove()},update:{theme:function(e){f.theme.set(!1===e?null:e,!1)},gallery:{list_alignment:function(t){var e,n,r;f.store.gallery&&((e=[".gallery-container div.content-container .media .loader",".gallery-container div.content-container .list",".gallery-container div.content-container .list > div.drag"]).forEach(function(e){return 0===t?$(e).removeClass("reversed"):$(e).addClass("reversed")}),n=$(e[1]).detach(),r=".gallery-container div.content-container .media",1===t?n.insertBefore(r):n.insertAfter(r),f.store.gallery.settings.list.reverse=0!==t)},reverse_options:function(e){f.store.gallery&&(f.store.gallery.settings.reverse_options=e)},autoplay:function(e){f.store.gallery&&(f.store.gallery.settings.autoplay=e)}}},options:{gather:function(e){var o={};return e.find(["select",'input[type="checkbox"]'].join(",")).each(function(e,t){var n,r;(t=$(t))[0].hasAttribute("name")&&(n=t.attr("name"),r=t.closest(".section").attr("data-key"),o.hasOwnProperty(r)||(o[r]={}),t.is("select")?o[r][n]=t[0].selectedIndex:t.is('input[type="checkbox"]')&&(o[r][n]=t[0].checked))}),o},set:function(i,e){var a=(a=1<arguments.length&&void 0!==e?e:null)||f.client.get();return Object.keys(i).forEach(function(r){var o="main"===r;o||a.hasOwnProperty(r)||(a[r]={}),Object.keys(i[r]).forEach(function(e){var t=null;switch(e){case"theme":i[r][e]<=config.themes.pool.length-1&&(t="default"!==config.themes.pool[i[r][e]]&&config.themes.pool[i[r][e]]);break;default:t=i[r][e]}var n=o?a[e]!==t:a[r][e]!==t;i[r][e]={value:t,changed:n},o?a[e]=t:a[r][e]=t,n&&(o&&f.settings.update.hasOwnProperty(e)?f.settings.update[e](t):f.settings.update[r].hasOwnProperty(e)&&f.settings.update[r][e](t))})}),config.debug&&console.log("set settings",i),f.client.set(a),i}},apply:function(e,t){var n=(n=1<arguments.length&&void 0!==t?t:null)||f.client.get();f.settings.options.set(f.settings.options.gather(e),n);f.settings.close()},show:function(){var t,l,e,n;0<$(".settings-container").length||(0===$(".focus-overlay").length&&$("<div/>",{class:"focus-overlay"}).appendTo($("body")).on("click",function(e){return f.settings.close()}),t=$("<div/>",{class:"settings-container"}),l=f.client.get(),e=[function(e,t){var n=0<arguments.length&&void 0!==e?e:f.settings.create.section("main"),r=1<arguments.length&&void 0!==t?t:0;return config.hasOwnProperty("themes")&&0<config.themes.pool.length&&(n.append(f.settings.create.option(f.settings.create.select(config.themes.pool.map(function(e,t){return{value:e,text:e}}),{name:"theme"},function(e,t,n){return null===config.themes.set&&0===t||e[0].value==config.themes.set}),"Theme")),r++),{settings:r,section:n}}()],config.gallery.enabled&&e.push(function(e,t){var i=0<arguments.length&&void 0!==e?e:f.settings.create.section("gallery"),a=1<arguments.length&&void 0!==t?t:0;return config.mobile||(i.append(f.settings.create.option(f.settings.create.select(["right","left"].map(function(e,t){return{value:"align-"+e,text:e}}),{name:"list_alignment"},function(e,t,n){return t===l.gallery.list_alignment}),"List Alignment")),a++),[["Reverse Search","reverse_options","Toggle visibility of reverse search options on images."],["Autoplay Videos","autoplay","Toggle autoplaying of videos."]].forEach(function(e){var t=_slicedToArray(e,3),n=t[0],r=t[1],o=t[2];i.append(f.settings.create.option(f.settings.create.check({name:r},function(){return f.checkNested(l,"gallery",r)?l.gallery[r]:config.gallery[r]}),n,{class:"interactable"},o)),a++}),{settings:a,section:i}}()),t.append($("<div/>",{class:"wrapper"}).append(e.map(function(e){return 0<e.settings?e.section:null}).filter(function(e){return null!==e}))),n=$("<div/>",{class:"bottom"}).appendTo(t),$("<div/>",{class:"apply ns",text:"Apply"}).appendTo(n).on("click",function(e){return f.settings.apply(t,l)}),$("<div/>",{class:"cancel ns",text:"Cancel"}).appendTo(n).on("click",function(e){return f.settings.close()}),$("body").append(t),t.find("div.section > .option.interactable").on("mouseup",function(e){var t;window.getSelection().toString()||0<(t=$(e.currentTarget).find('input[type="checkbox"]')).length&&!$(e.target).is("input")&&(t[0].checked=!t[0].checked)}))}},menu:{create:function(){var n=$("<div/>",{class:"menu"}).appendTo($("body")),e=[{text:"[Show] Filter",id:"filter"},{text:"[Copy] WGET",id:"copy"}];return!0===config.gallery.enabled&&0<$("a.preview").length&&e.unshift({text:"[Open] Gallery",id:"gallery"}),f.settings.available()&&e.unshift({text:"[Open] Settings",id:"settings",class:"settings"}),e.forEach(function(e){var t=$("<div/>",{text:e.text,class:"ns"+(e.hasOwnProperty("class")?" "+e.class:"")}).appendTo(n);e.hasOwnProperty("id")&&t.attr("id",e.id)}),n},toggle:function(e){var t=0<arguments.length&&void 0!==e?e:null,n=$("body > div.menu");return n.css("display","boolean"==typeof t?t?"inline-block":"none":n.is(":hidden")?"inline-block":"none"),$("body > .top-bar > div.extend").html(n.is(":hidden")?"&#x25BE;":"&#x25B4;"),n.is(":hidden")}},theme:{set:function(e,t){var n=0<arguments.length&&void 0!==e?e:null,r=!(1<arguments.length&&void 0!==t)||t,o=$('head > link[rel="stylesheet"]').filter(function(e,t){return t.hasAttribute("href")&&t.getAttribute("href").match(new RegExp("/(themes)/","i"))});if(null===(config.themes.set=n)||!n)return o.each(function(e,t){return t.remove()}),!1;r&&f.client.set(f.client.get().theme=n),$("head").append($("<link/>",{rel:"stylesheet",type:"text/css",href:"".concat(config.themes.path,"/").concat(n,".css")})),o.each(function(e,t){return t.remove()})}},filter:{apply:function(e,t){var o=0<arguments.length&&void 0!==e?e:null;f.store.refresh=!0;var i={reset:""===(o=o||""),shown:{directories:0,files:0},hidden:{directories:0,files:0},size:0},a=null;f.store.gallery&&(f.store.gallery.data.selected.index=0),$("body > table tr.file, body > table tr.directory").each(function(e,t){if(t=$(t),!0===i.reset)return t.css("display",""),!0;var n,r=t.hasClass("file");try{a={valid:!0,data:t.find("td:eq(0)").attr("data-raw").match(new RegExp(o,"i"))}}catch(e){a={valid:!1,reason:e}}t.css("display",a.valid&&a.data?"":"none"),a.valid&&a.data&&r&&(n=t.find("td:eq(2)").attr("data-raw"),isNaN(n)||(i.size=i.size+parseInt(n))),a.valid&&a.data?r?i.shown.files++:i.shown.directories++:r?i.hidden.files++:i.hidden.directories++});var n={container:$("body > div.top-bar")};["size","files","directories"].forEach(function(e){return n[e]=n.container.find('[data-count="'.concat(e,'"]'))}),f.store.defaults.hasOwnProperty("top_values")||(f.store.defaults.top_values={size:n.size.text(),files:n.files.text(),directories:n.directories.text()}),n.size.text(i.reset?f.store.defaults.top_values.size:f.getReadableSize(i.size)),n.files.text(i.reset?f.store.defaults.top_values.files:"".concat(i.shown.files," file").concat(1===i.shown.files?"":"s")),n.directories.text(i.reset?f.store.defaults.top_values.directories:"".concat(i.shown.directories," ").concat(1===i.shown.directories?"directory":"directories"));var r,l=$("body > div.menu > #gallery"),s=$("body > table tr.file:visible a.preview").length,c=$(".filter-container div.status");0<c.length&&(i.reset?c.text("").removeClass("se"):a&&!1===a.valid?c.text(a.reason).addClass("se"):(r=i.shown.files+i.shown.directories,c.text("".concat(r," result").concat(1===r?"":"s",".")).removeClass("se"))),!i.reset&&0===s&&0<l.length?"none"!==l.css("display")&&l.css("display","none"):(0<s||i.reset)&&0<l.length&&"none"===l.css("display")&&l.css("display","block")},toggle:function(){var e=$(".filter-container"),t=e.find('input[type="text"]');e.is(":visible")?e.hide():(t.val(""),f.filter.apply(null),e.show()),t.focus()}},dates:{convert:function(e){return e<10?"0"+e:e},load:function(){var u,e=(new Date).getTimezoneOffset(),t=f.client.get();t.timezone_offset=e,f.client.set(t),u=e,$("tbody tr.directory > td:nth-child(2), tbody tr.file > td:nth-child(2)").each(function(e,t){var n,r,o,i,a,l,s,c,d;(t=$(t))[0].hasAttribute("data-raw")&&(r=(n=_slicedToArray((s=t.attr("data-raw"),c=f.dates.convert,d=new Date(1e3*s),["".concat(c(d.getDate()),"/").concat(c(d.getMonth()+1),"/").concat(d.getFullYear().toString().substring(2)),"".concat(c(d.getHours()),":").concat(c(d.getMinutes()))]),2))[0],o=n[1],i=0<u?-Math.abs(u):Math.abs(u),i/=60,a=$("<span/>"),(l=function(e){if(0===e)return"Now";if(e<0)return!1;for(var t={year:31556926,month:2629743,week:604800,day:86e3,hour:3600,minute:60,second:1},n=Object.keys(t),r=n.length-1,o=!1,i=0;i<n.length;i++){var a=n[i];if(!(e<=t[a])){var l=i+1<=r?n[i+1]:null,s=Math.floor(e/t[a]),c=l?Math.floor((e-s*t[a])/t[l]):0,o="".concat(s," ").concat(a).concat(1==s?"":"s")+(0<c?" and ".concat(c," ").concat(l).concat(1==c?"":"s"):"")+" ago";break}}return o}(config.timestamp-parseInt(t.attr("data-raw"))))&&a.attr("title","".concat(l," (UTC").concat((0<i?"+":"")+i,")")),a.html(r).append($("<span/>",{"data-view":"desktop",text:" "+o})),t.html(a))})}},sort:{load:function(){if(config.hasOwnProperty("sorting")&&config.sorting.enabled&&(0===config.sorting.types||1===config.sorting.types)){var e,t="asc"===config.sorting.order,n=null;switch(config.sorting.sort_by){case"name":n=0;break;case"modified":n=1;break;case"size":n=2;break;case"type":n=3;break;default:n=null}null===n||0<(e=$("table th span[sortable]").eq(n).parents("th")).length&&(e[0].asc=t,e.find("> span.sort-indicator").addClass(t?"down":"up").fadeIn(350))}}},gallery:{load:function(e){var t=0<arguments.length&&void 0!==e?e:0;if(config.debug&&console.log("gallery.load =>",t),!config.gallery.enabled)return!1;if(f.store.gallery&&!1!==f.store.gallery){var n=f.store.refresh?f.getTableItems():null;return null!==n&&0===n.length?!1:(f.store.gallery.show(!0,null===t?f.store.gallery.data.selected.index:t,n),void(f.store.refresh&&(f.store.refresh=!1)))}var r,o=f.client.get();o.hasOwnProperty("gallery")||(o.gallery={list_state:1},f.client.set(o)),r=JSON.parse(o.gallery.hasOwnProperty("list_state")?o.gallery.list_state:1),f.store.gallery=new $.fn.gallery(f.getTableItems(),{start:null===t?0:t,filter:!1,console:config.debug,fade:config.gallery.fade,mobile:config.mobile,reverse_options:f.checkNested(o,"gallery","reverse_options")?o.gallery.reverse_options:config.gallery.reverse_options,autoplay:f.checkNested(o,"gallery","autoplay")?o.gallery.autoplay:config.gallery.autoplay,scroll_interval:config.gallery.scroll_interval,list:{show:null==r||!!r,reverse:!!f.checkNested(o,"gallery","list_alignment")&&0!==o.gallery.list_alignment}}),!1!==f.store.gallery&&$(f.store.gallery).on("unbound",function(e,t){return f.bind()})}},overlay:{hide:function(e){var t=0<arguments.length&&void 0!==e?e:function(){},n=0;[{e:$(".filter-container"),func:f.filter.toggle},{e:$("body > div.menu"),func:f.menu.toggle}].forEach(function(e){0<e.e.length&&e.e.is(":visible")&&(e.func(),n++)}),t(0<n)}},getTableItems:function(){var a=[];return $("tr.file td:first-child a.preview").each(function(e,t){var n=(t=$(t)).closest("tr");if(n.is(":hidden"))return!0;var r=t.attr("href"),o=t.closest("td").data("raw"),i=n.find("td").eq(2).text();void 0!==r&&void 0!==o&&a.push({name:o,url:r,size:i})}),a},events:{scroll:function(){var e=$("body > div.path"),t=$("div.top-bar > div.directory-info > div.quick-path");$(window).scrollTop()<e.offset().top+e.outerHeight()?t.fadeOut(150):(0===t.length&&(t=$("<div/>",{class:"quick-path","data-view":"desktop"}).html($("body > div.path").html()),$("div.top-bar > div.directory-info").append(t)),t.fadeIn(150).css("display","inline-block"))}},bind:function(){$(document).off("keydown").on("keydown",function(t){var e;t.shiftKey&&70===t.keyCode?(t.preventDefault(),f.filter.toggle()):27===t.keyCode?f.overlay.hide(function(e){!0===e&&t.preventDefault()}):71===t.keyCode&&!0===config.gallery.enabled&&(!1!==(e=$(".filter-container")).is(":visible")&&e.find('input[type="text"]').is(":focus")||(f.gallery.load(null),f.menu.toggle(!1)))}),$(window).on("scroll",f.debounce(function(e){f.events.scroll()}))}};$("body > .top-bar > div.extend").on("click",function(e){f.menu.toggle(e.currentTarget)}),$(".filter-container > div.close > span").on("click",function(e){f.filter.toggle()}),$('.filter-container > div input[type="text"]').on("input",function(e){var t=$(e.currentTarget);f.filter.apply(t.val(),t)}),$(document).on("click","body > div.menu #filter",function(e){f.filter.toggle(),f.menu.toggle()}),$(document).on("click","body > div.menu #settings",function(e){f.settings.show(),f.menu.toggle(!1)}),!0===config.gallery.enabled&&($(document).on("click","body > div.menu #gallery",function(e){f.gallery.load(null),f.menu.toggle(!1)}),$("tbody tr.file a.preview").on("click",function(e){var t;e.preventDefault(),$(e.target).is("a")&&(t=$(e.target).closest("table").find("tr.file:visible").filter(function(e,t){return 0<$(t).find("a.preview").length}).index($(e.target).closest("tr.file")),f.gallery.load(-1!==t?t:0))})),$(document).on("click","body > div.menu #copy",function(e){var t,r;f.copyTextToClipboard((t=window.location.href,r=[],$("tr.file td:first-child a:visible").each(function(e,t){var n=$(t).text().split(".").pop().toLowerCase().trim();r.includes(n)||r.push(n)}),'wget -r -np -nH -nd -e robots=off --accept "'.concat(r.join(","),'" "').concat(t,'"'))),f.menu.toggle(!1)}),$("table th span[sortable]").on("click",function(e){var t=$(e.currentTarget).parents("th"),n=t.index(),r=$(e.currentTarget).is("th")?e.currentTarget:t[0],o=$(r).parents("table").eq(0),i={directories:o.find("tbody tr.directory").toArray(),files:o.find("tbody tr.file").toArray()},a=config.sorting.hasOwnProperty("sort_by")&&(2===n||3===n);0!==config.sorting.types&&2!==config.sorting.types||a||i.directories.sort(f.comparer($(r).index())),0!==config.sorting.types&&1!==config.sorting.types||i.files.sort(f.comparer($(r).index())),r.asc=!r.asc,$("body > table span.sort-indicator").removeClass("up down"),t.find("> span.sort-indicator").addClass(r.asc?"down":"up").show();var l=f.client.get();l.sort.ascending=r.asc?1:0,l.sort.row=n,f.client.set(l),r.asc||(0!==config.sorting.types&&2!==config.sorting.types||a||(i.directories=i.directories.reverse()),0!==config.sorting.types&&1!==config.sorting.types||(i.files=i.files.reverse())),Object.keys(i).forEach(function(e){return i[e].forEach(function(e){return o.append(e)})}),f.store.refresh=!0,f.store.selected=null,$("tbody tr.last").removeClass("last")}),window.addEventListener("resize",f.debounce(function(e){config.mobile=Modernizr.mq("(max-width: 640px)")})),$(document).ready(function(){f.bind(),f.dates.load(),$('.filter-container > input[type="text"]').val(""),config.mobile=Modernizr.mq("(max-width: 640px)"),f.menu.create().css({top:$("body > div.top-bar").innerHeight()+"px",visibility:"unset",display:"none"}),!1===config.mobile&&!0===config.preview.enabled&&(f.store.preview.main=new $.fn.imagePreview({elements:["a.preview","div.preview"],hoverDelay:config.preview.hover_delay,windowMargin:config.preview.window_margin,staticPreview:config.preview.static,extensions:{images:config.extensions.image,videos:config.extensions.video}}),$(f.store.preview.main).on("loaded",function(e,t){t&&config.debug&&console.log("preview_loaded",t)}),!0===config.preview.cursor_indicator&&$(f.store.preview.main).on("loadChange",function(e,t){$("body > table tr.file a.preview").css("cursor",t?"progress":"pointer")})),f.events.scroll()}),f.client.get(),f.sort.load(),config.debug&&console.log("config",config)}();