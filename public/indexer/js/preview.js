"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/**
 * @license
 * 
 * <image-preview-js> [https://github.com/sixem/image.preview.js]
 *
 * Licensed under MIT
 * @author  emy [admin@eyy.co]
 * @version 0.3
 */
!function(l){l.fn.imagePreview=function(t){var a={loading:null,store:{},last:{},css:{required:{}}};a.settings=l.extend({hoverDelay:75,staticPreview:!1,windowMargin:4,triggerMargin:24,elements:[],extensions:{images:["jpg","jpeg","gif","png","ico","svg","bmp"],videos:["mp4","webm"]}},a.settings,t),a.css.required={"max-height":"calc(100% - "+2*a.settings.windowMargin+"px)",visibility:"hidden",position:"fixed",top:a.settings.windowMargin,left:0,"z-index":99999,"pointer-events":"none"},a.refreshSettings=function(){a.css.required["max-height"]="calc(100% - "+2*a.settings.windowMargin+"px)",a.css.required.top=a.settings.windowMargin},a.isStatic=function(){return!(!a.settings.staticPreview&&null!=a.settings.mouse)},a.arrayContains=function(t,e){return-1<l.inArray(t,e)};function i(){var t,e,i,r,n,s,o,g;null!=a.current&&(a.windowScrollTop=l(window).scrollTop(),a.windowScrollLeft=l(window).scrollLeft(),a.isStatic()?null==a.store.offset&&(a.store.offset=(t=a.last.trigger,{top:(e=t.offset()).top-a.windowScrollTop,left:e.left-a.windowScrollLeft,offset:e,margin:t.width()+a.settings.triggerMargin})):null==a.store.offset?a.store.offset={top:a.settings.mouse.pageY-a.windowScrollTop,left:a.settings.mouse.pageX-a.windowScrollLeft,margin:a.settings.triggerMargin}:a.store.offset.left=a.settings.mouse.pageX-a.windowScrollLeft,a.windowWidthH>a.windowWidth-a.store.offset.left?(i=Math.floor(a.windowWidth-a.store.offset.left+a.settings.triggerMargin),a.current.css({left:"",right:i+"px","max-width":a.windowWidth-i-a.settings.windowMargin+"px"})):(i=Math.floor(a.store.offset.left+a.store.offset.margin),a.current.css({left:i+"px",right:"","max-width":a.windowWidth-i-a.settings.windowMargin+"px"})),null==a.store.currentTop&&(r=a.windowHeight-2*a.settings.windowMargin,a.store.adjustedHeight=a.current.height(),a.store.adjustedHeight<r&&(a.store.currentTop=(n=r,s=a.store.offset.top,g=n/100*(o=100<(o=s/n*100)?100:o)-a.store.adjustedHeight/100*o,a.current.css("max-height",n-(n-a.store.adjustedHeight)+"px"),g<a.settings.windowMargin?a.settings.windowMargin:g),a.current.css("top",a.store.currentTop+"px"))),a.current.css("visibility","visible"),a.visible=!0)}function r(t){if(!1===t){var e=l("body").find("#video-preview, #image-preview");return 0<e.length&&e.remove(),a.visible=!1,a.current=a.last.src=void 0,!(a.store={adjustedHeight:0,currentHeight:0,currentWidth:0,currentTop:void 0})}var i,r,n,s,o=a.last.trigger.data("preview");!1!==o&&void 0!==o?a.last.src=a.last.trigger.data("preview"):"undefined"!==_typeof(i=a.last.trigger.attr(a.last.trigger.is("img")?"src":"href"))&&!1!==i&&(a.last.src=i),null!=a.last.src&&(a.last.ext=a.last.src.split(".").pop().toLowerCase(),a.arrayContains(a.last.ext,a.settings.extensions.images)&&(null===a.loading&&(l(a).trigger("loadChange",!0),a.loading=!0),(r=new Image).orig=a.last.src,l(r).on("load",function(t){var e;if(!a.visible)return t.currentTarget.orig==a.last.src&&(e=l("<img>",{id:"image-preview",src:r.src}).prependTo(l("body")),a.current=e,a.current.on("load",function(){a.getDimensions()}),a.current.css(a.css.required),void 0!==a.settings.css&&a.current.css(a.settings.css),null!==a.loading&&(l(a).trigger("loadChange",!1),a.loading=null),l(a).trigger("loaded",{itemType:0,element:e,source:t.currentTarget.orig,dimensions:{width:t.currentTarget.width,height:t.currentTarget.height}})),!0}),r.src=a.last.src),a.arrayContains(a.last.ext,a.settings.extensions.videos)&&(null===a.loading&&(l(a).trigger("loadChange",!0),a.loading=!0),n=l("<video/>",{id:"video-preview",loop:"",muted:"",autoplay:""}).prependTo(l("body")),s=l("<source>",{src:""}).prependTo(n),(a.current=n).attr("data-orig",a.last.src),s.attr("src",a.last.src),n.css(a.css.required),void 0!==a.settings.css&&n.css(a.settings.css),n[0].muted=!0,n[0].load(),a.waitForVideo(n)))}a.waitForVideo=function(e){!function t(){return null!=a.current&&e.data("orig")===a.last.src&&(3<=e.prop("readyState")&&0<e.width()&&0<e.height()?(a.currentWidth=e.width(),a.store.currentHeight=e.height(),i(a.isStatic()),e[0].play(),l(a).trigger("loadChange",!1),null!==a.loading&&(l(a).trigger("loadChange",!1),a.loading=null),l(a).trigger("loaded",{itemType:1,element:e,source:e.data("orig"),dimensions:{width:e.width(),height:e.height()}}),!0):void setTimeout(t,150))}()},a.getDimensions=function(){!function t(){return null!=a.current&&(0<a.current.width()&&0<a.current.height()?(a.currentWidth=a.current.width(),a.store.currentHeight=a.current.height(),i(a.isStatic()),!0):void setTimeout(t,150))}()};function n(){a.windowWidth=l(window).width(),a.windowHeight=l(window).height(),a.windowWidthH=a.windowWidth/2}return function(){if(a.settings.elements.length<1)return;n(),l.each(a.settings.elements,function(t,e){l(e).off("mouseenter").on("mouseenter",function(t){a.last.trigger=l(t.currentTarget),a.timer=setTimeout(function(){return!!a.visible||void r()},a.settings.hoverDelay)}),l(e).off("mouseleave").on("mouseleave",function(t){null!==a.loading&&(l(a).trigger("loadChange",!1),a.loading=null),clearTimeout(a.timer),r(!1)}),l(window).off("resize").on("resize",function(){void 0!==a.resizeTimer&&clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(function(){n()},250)}),a.settings.staticPreview||l(e).off("mousemove").on("mousemove",function(t){a.settings.mouse=t,a.visible&&i()})})}(),a}}(jQuery);